    const dadosRevisao = {
        V350: {
            1000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            3000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            6000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            9000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            12000: [
                { codigo: '1224300125000', nome: 'Filtro de Ar', qtd: 1, valor: 106.00 },
                { codigo: '1051158001000', nome: 'Velas', qtd: 1, valor: 108.00 },
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '319717', nome: 'L√≠quido Arrefecimento', qtd: 1, valor: 30.00 }
            ],
            15000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            18000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '324950', nome: 'Fluido de Freio', qtd: 1, valor: 22.00 }
            ],
            tmo: { 1000: 0.0, 3000: 0.5, 6000: 1.0, 9000: 0.5, 12000: 2.0, 15000: 0.5, 18000: 1.5 }
        },
        T350: {
            1000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            3000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            6000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            9000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            12000: [
                { codigo: '1224300125000', nome: 'Filtro de Ar', qtd: 1, valor: 106.00 },
                { codigo: '1051158001000', nome: 'Velas', qtd: 1, valor: 108.00 },
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '319717', nome: 'L√≠quido Arrefecimento', qtd: 1, valor: 30.00 }
            ],
            15000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            18000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '324950', nome: 'Fluido de Freio', qtd: 1, valor: 22.00 }
            ],
            tmo: { 1000: 0.0, 3000: 0.5, 6000: 1.0, 9000: 0.5, 12000: 2.0, 15000: 0.5, 18000: 1.5 }
        },
        GK350: {
            1000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            3000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            6000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            9000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            12000: [
                { codigo: '1224300125000', nome: 'Filtro de Ar', qtd: 1, valor: 106.00 },
                { codigo: '1051158001000', nome: 'Velas', qtd: 1, valor: 108.00 },
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '319717', nome: 'L√≠quido Arrefecimento', qtd: 1, valor: 30.00 }
            ],
            15000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            18000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '324950', nome: 'Fluido de Freio', qtd: 1, valor: 22.00 }
            ],
            tmo: { 1000: 0.0, 3000: 0.5, 6000: 1.0, 9000: 0.5, 12000: 2.0, 15000: 0.5, 18000: 1.5 }
        },
        S350: {
            1000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            3000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            6000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            9000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            12000: [
                { codigo: '1224300125000', nome: 'Filtro de Ar', qtd: 1, valor: 106.00 },
                { codigo: '1051158001000', nome: 'Velas', qtd: 1, valor: 108.00 },
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '319717', nome: 'L√≠quido Arrefecimento', qtd: 1, valor: 30.00 }
            ],
            15000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            18000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '324950', nome: 'Fluido de Freio', qtd: 1, valor: 22.00 }
            ],
            tmo: { 1000: 0.0, 3000: 0.5, 6000: 1.0, 9000: 0.5, 12000: 2.0, 15000: 0.5, 18000: 1.5 }
        },
        R350: {
            1000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            3000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            6000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 }
            ],
            9000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            12000: [
                { codigo: '1224300125000', nome: 'Filtro de Ar', qtd: 1, valor: 106.00 },
                { codigo: '1051158001000', nome: 'Velas', qtd: 1, valor: 108.00 },
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '319717', nome: 'L√≠quido Arrefecimento', qtd: 1, valor: 30.00 }
            ],
            15000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            18000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '4134300001000', nome: 'Filtro de √ìleo', qtd: 1, valor: 130.00 },
                { codigo: '324950', nome: 'Fluido de Freio', qtd: 1, valor: 22.00 }
            ],
            tmo: { 1000: 0.0, 3000: 0.5, 6000: 1.0, 9000: 0.5, 12000: 2.0, 15000: 0.5, 18000: 1.5 }
        },
        '350E': {
            1000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '1050871006000', nome: 'Filtro de √ìleo', qtd: 1, valor: 120.00 }
            ],
            3000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            6000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '1050871006000', nome: 'Filtro de √ìleo', qtd: 1, valor: 120.00 }
            ],
            9000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            12000: [
                { codigo: '1226400175000', nome: 'Filtro de Ar', qtd: 1, valor: 180.00 },
                { codigo: '1050970004000', nome: 'Velas', qtd: 1, valor: 165.00 },
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '1050871006000', nome: 'Filtro de √ìleo', qtd: 1, valor: 120.00 },
                { codigo: '319717', nome: 'L√≠quido Arrefecimento', qtd: 1, valor: 30.00 }
            ],
            15000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 }
            ],
            18000: [
                { codigo: 'MT114', nome: '√ìleo do Motor', qtd: 2, valor: 70.00 },
                { codigo: '1050871006000', nome: 'Filtro de √ìleo', qtd: 1, valor: 120.00 },
                { codigo: '1050771003000', nome: 'Correia CVT', qtd: 1, valor: 1150.00 },
                { codigo: '324950', nome: 'Fluido de Freio', qtd: 1, valor: 22.00 }
            ],
            tmo: { 1000: 0.0, 3000: 0.5, 6000: 1.0, 9000: 0.5, 12000: 1.5, 15000: 0.5, 18000: 2.5 }
        }
    };

    const TMO_HORA = 250; // R$ 250,00 por hora

    document.getElementById('veiculoSelect').addEventListener('change', calcular);
    document.getElementById('kmSelect').addEventListener('change', calcular);

    function formatMoney(v) {
        return 'R$ ' + v.toFixed(2).replace('.', ',');
    }

    function calcular() {
        const veiculo = document.getElementById('veiculoSelect').value;
        const km = document.getElementById('kmSelect').value;
        const listaPecas = document.getElementById('listaPecas');
        const totalPecasEl = document.getElementById('totalPecas');
        const totalTMOEl = document.getElementById('totalTMO');
        const totalGeralEl = document.getElementById('totalGeral');
        const subPecasEl = document.getElementById('subPecas');
        const subTMOEl = document.getElementById('subTMO');
        const subTotalEl = document.getElementById('subTotal');

        if (!veiculo || !km) {
            listaPecas.innerHTML = '<div class="no-result">üëÜ Selecione ve√≠culo e KM para ver as pe√ßas da revis√£o</div>';
            totalPecasEl.textContent = 'R$ 0,00';
            totalTMOEl.textContent = 'R$ 0,00';
            totalGeralEl.textContent = 'R$ 0,00';
            subPecasEl.textContent = 'Sem itens selecionados';
            subTMOEl.textContent = '0,0 h √ó R$ 250,00/h';
            subTotalEl.textContent = 'Pe√ßas + M√£o de Obra';
            return;
        }

        const revisao = (dadosRevisao[veiculo] && dadosRevisao[veiculo][km]) || [];
        const tmoHoras = (dadosRevisao[veiculo] && dadosRevisao[veiculo].tmo && dadosRevisao[veiculo].tmo[parseInt(km)]) || 0;

        if (!revisao.length) {
            listaPecas.innerHTML = '<div class="no-result">Nenhuma pe√ßa cadastrada para esta revis√£o</div>';
        } else {
            let header = `
                <div class="peca-header">
                    <div>Pe√ßa</div>
                    <div>C√≥digo</div>
                    <div>Qtd.</div>
                    <div>Total (R$)</div>
                </div>
            `;
            const itens = revisao.map(peca => `
                <div class="peca-item">
                    <div class="peca-nome">${peca.nome}</div>
                    <div class="peca-codigo">${peca.codigo}</div>
                    <div class="peca-qtd">${peca.qtd}</div>
                    <div class="peca-valor">${formatMoney(peca.qtd * peca.valor)}</div>
                </div>
            `).join('');
            listaPecas.innerHTML = header + itens;
        }

        const totalPecas = revisao.reduce((sum, p) => sum + p.qtd * p.valor, 0);
        const totalTMO = tmoHoras * TMO_HORA;
        const totalGeral = totalPecas + totalTMO;

        totalPecasEl.textContent = formatMoney(totalPecas);
        totalTMOEl.textContent = formatMoney(totalTMO);
        totalGeralEl.textContent = formatMoney(totalGeral);

        subPecasEl.textContent = revisao.length ? `${revisao.length} item(ns) na revis√£o` : 'Sem itens selecionados';
        subTMOEl.textContent = `${tmoHoras.toFixed(1).replace('.', ',')} h √ó R$ 250,00/h`;
        subTotalEl.textContent = 'Pe√ßas + M√£o de Obra';

    }
